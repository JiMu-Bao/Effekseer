% No11. Let's use 3D model!!

<div class="main">

## Overview

In this chapter, we create an effect with a 3D model.
In Effekseer, 3D models can be shown as particles, or it can be used as a spawning position in Spawning method.
We create effects with these functions.

<div align="center">
<table>
<tr>

<td>
<div align="center">
<img src="../../img/Tutorial/11_effect1.gif">
<p>本章で作成するエフェクト1</p>
</div>
</td>
<td>
<div align="center">
<img src="../../img/Tutorial/11_effect2.gif">
<p>本章で作成するエフェクト2</p>
</div>
</td>

</tr>
</table>
</div>

## 3D model

Effekseerでは、fbxかmqoの3Dモデルを読み込めます。
fbxはBlender、Maya、3ds Max等、様々な3D編集ソフトから出力できる形式です。
mqoはMetasequoiaから出力できる形式です。

アニメーション付きのfbxにも対応しています。

使い方は2つあります。

1つ目は3Dモデルをパーティクルとして表示する方法です。

図

2つ目は生成方法の生成位置として3Dモデルを表示する方法です。

図

本章では、これらの使用方法について説明します。

Effekseer can read the 3D model of fbx or mqo.
fbx is a format that can be output from various 3D editing software such as Blender, Maya, 3ds Max, etc.
mqo is a format that can be output from Metasequoia.

Also supports fbx with animation.

There are two uses.

The first method is to display the 3D model as particles.

Figure

The second method is to display the 3D model as the generation position of the generation method.

Figure

This chapter explains how to use them.


<p>あらかじめ作成途中のエフェクトを下記のリンクからダウンロードできるようにしました。</p>
<div align="center">
<p><a href = "../../Sample/07_01_Sample.zip">Download</a></p>
</div>

## Show 3D model as particles

モデルをパーティクルとして表示します。

effect1.efkprojを開いてください。

スプライトと同じように、「描画」パネルから描画方法としてモデルを選択します。

そして、Model/model1.fbxをモデルとして読み込みます。

読み込んだ3Dモデルが表示されていることがわかります。

図

ただ、このままでは奥行きがおかしいのでZ書き込み？をOnにしましょう。
Effekseerに限らず、3Dには前後を判定する機能があります。
Z書き込みがオフだと、他のオブジェクトが3Dモデルが描画されなかったものとして描画されます。
そのため、奥行きがおかしんくなることがあります。

Z書き込みをOnにすると、奥行きも含め、正しく表示されていることがわかります。

図

不透明なオブジェクトならこれで問題ありませんが、モデルの形に沿ってエフェクトを出したいときもあります。

そのようなときは、描画パネルからライトをオフにします。
先ほどのZ書き込みもオフにします。

加えて画像を設定しましょう。
さらに、UVスクロールも設定します。

見栄えを良くするために3Dモデルを3つ配置します。

パラメーターは以下のようになります。

xxxxx

そうするとモデルの形に沿ってエフェクトが流れることがわかります。

図

Display the model as particles.

Please open effect1.efkproj.

Just like sprites, select a model as the drawing method from the Drawing panel.

Then we read Model / model1.fbx as a model.

You can see that the loaded 3D model is displayed.

Figure

Just write in Z as it is strange because the depth is wrong? Let's turn it On.
Not limited to Effekseer, 3D has a function to judge before and after.
When Z writing is off, other objects are rendered as if the 3D model was not drawn.
Therefore, the depth may be funny.

If Z writing is set to On, you can see that it is correctly displayed including the depth.

Figure

If this is an opaque object, there is no problem with this, but there are times when you want to put out effects along the shape of the model.

In such a case, turn off the light from the drawing panel.
We will also turn off Z writing earlier.

In addition let's set the image.
We also set UV scrolling.

We will arrange three 3D models to make it look good.

The parameters are as follows.

xxxxx

Then you can see that the effect flows along the shape of the model.

Figure


## 生成方法の位置として使用

モデルを表示する以外にも生成方法の位置として使用できます。

モデルの頂点や面の位置にパーティクルを生成できます。

試してみましょう。

effect2.efkprojを開いてください。

生成方法でモデルを選択します。そしてモデルとしてModel/を読み込みます。
わかりやすくするために、生成位置種類を頂点にします。

パーティクルの画像にはxxxを設定します。
生成数も増やします。

パラメーターは以下のようになります。

xxx

モデルに沿ってパーティクルが配置されることがわかります。

図

リボンや軌跡と組み合わせることもできます。
その場合、モデルの頂点に沿ってリボンや軌跡が生成されます。

図


Besides displaying the model, it can be used as the position of the generation method.

You can generate particles at the vertices and faces of the model.

Let's try it.

Please open effect2.efkproj.

Select the model by generation method. Then load Model / as a model.
For clarity, make the generation position type a vertex.

Set xxx for particle image.
We also increase the number of generations.

The parameters are as follows.

xxx

You can see that particles are placed along the model.

Figure

It can also be combined with ribbons and tracks.
In that case, ribbons and trajectories are generated along the vertices of the model.

Figure

Finally, I tried to download the effect created in this chapter.


最後に、本章で作成されたエフェクトをダウンロードできるようにしてみました。

<div align="center">
<a href = "../../Sample/10_02_Sample.zip">Download</a>
</div>

## Summary

本章では、3Dを使用してエフェクトを作成しました。
次章では、Fカーブを使用して複雑な動きを再現します。

In this chapter, we created an effect using 3D.
In the next chapter, we will use the F curve to reproduce complex movements.

</div>
